<!DOCTYPE html>
<html lang="en" class="">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="google-site-verification" content="BRV_r0FpPSmtnFP2O1046fyRNnLh3dwxUJQbLQrTSzw" />
    <title>Matir Kotha</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script>
        tailwind.config = {
            darkMode: 'class',
            theme: {
                extend: {
                    colors: {
                        'brand-light': '#DDCDBB',
                        'brand-dark': '#3E2723',
                        'brand-accent': '#A1887F',
                    }
                }
            }
        }
    </script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Ubuntu&display=swap" rel="stylesheet">
    <link rel="manifest" href="manifest.json">
    <style>
        html {
            scroll-behavior: smooth;
        }
        body {
            font-family: "Ubuntu", sans-serif;
            background-color: #DDCDBB;
        }
        .dark body {
             background-color: #3E2723;
        }
        .hero-section {
            background-image: url('images/hero-background.jpg');
            background-size: cover;
            background-position: center top;
        }
        .carousel-button {
             background-color: rgba(255, 255, 255, 0.7);
             border-radius: 50%;
             width: 2rem;
             height: 2rem;
             display: flex;
             align-items: center;
             justify-content: center;
        }
         .carousel-button:hover {
            background-color: rgba(255, 255, 255, 1);
        }
        .dark .carousel-button {
            background-color: rgba(0, 0, 0, 0.5);
            color: #EBEDDF;
        }
        .dark .carousel-button:hover {
            background-color: rgba(0, 0, 0, 0.8);
        }
        #cart-modal, #search-overlay {
            transition: opacity 0.3s ease-in-out, visibility 0.3s ease-in-out;
        }
        .cart-item-quantity button {
            width: 28px;
            height: 28px;
        }
    </style>
</head>
<body class="bg-brand-light dark:bg-brand-dark text-brand-dark transition-colors duration-300">

    <!-- Header -->
    <header class="fixed top-0 left-0 right-0 bg-brand-light bg-opacity-80 dark:bg-brand-dark dark:bg-opacity-60 backdrop-blur-md z-50 shadow-sm">
        <div class="container mx-auto px-4 sm:px-6 lg:px-8">
            <div class="flex items-center justify-between h-20">
                <div class="flex-shrink-0">
                    <a href="#" class="text-2xl font-bold text-brand-dark dark:text-brand-light flex items-center">
                        <svg class="w-7 h-7 inline-block mr-2" fill="currentColor" viewBox="0 0 512 512" xmlns="http://www.w3.org/2000/svg"><path d="M512 256C512 397.4 397.4 512 256 512S0 397.4 0 256S114.6 0 256 0S512 114.6 512 256zM256 48C141.1 48 48 141.1 48 256s93.1 208 208 208s208-93.1 208-208S370.9 48 256 48zM156.4 146.2c-16.1 21.3-24.4 47.6-24.4 75.2c0 27.6 8.3 53.9 24.4 75.2L112.9 335c-4.1 5.5-2.7 13.5 2.8 17.6s13.5 2.7 17.6-2.8l45.7-61.1c11.2 5.1 23.3 8.3 36.1 9.4V400c0 8.8 7.2 16 16 16s16-7.2 16-16V300.2c12.3-1.4 24.1-4.7 35.2-10l45.4 60.5c4.1 5.5 12.1 6.9 17.6 2.8s6.9-12.1 2.8-17.6l-43.5-57.9c16.1-21.3 24.4-47.6 24.4-75.2c0-27.6-8.3-53.9-24.4-75.2l43.5-57.9c4.1-5.5 2.7-13.5-2.8-17.6s-13.5-2.7-17.6 2.8L339.6 122c-11.2-5.1-23.3-8.3-36.1-9.4V48c0-8.8-7.2-16-16-16s-16 7.2-16 16v66.8c-12.3 1.4-24.1 4.7-35.2 10L172.9 69.3c-4.1-5.5-12.1-6.9-17.6-2.8s-6.9 12.1-2.8 17.6l43.8 58.1z"/></svg>
                        Matir Kotha
                    </a>
                </div>
                <div class="flex items-center space-x-5">
                    <button id="theme-toggle-button" class="text-brand-dark dark:text-brand-light w-6 h-6 flex items-center justify-center text-xl">
                        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512" class="sun-icon w-6 h-6 text-yellow-500"><path fill="currentColor" d="M256 160c-52.9 0-96 43.1-96 96s43.1 96 96 96 96-43.1 96-96-43.1-96-96-96zm246.4 80.5l-94.7-47.3 33.5-100.4c4.5-13.6-8.4-26.5-21.9-21.9l-100.4 33.5-47.4-94.8c-6.4-12.8-24.6-12.8-31 0l-47.3 94.7-100.5-33.5c-13.6-4.5-26.5 8.4-21.9 21.9l33.5 100.4-94.7 47.4c-12.8 6.4-12.8 24.6 0 31l94.7 47.3-33.5 100.5c-4.5 13.6 8.4 26.5 21.9 21.9l100.4-33.5 47.3 94.7c6.4 12.8 24.6 12.8 31 0l47.3-94.7 100.4 33.5c13.6 4.5 26.5-8.4 21.9-21.9l-33.5-100.4 94.7-47.3c13-6.5 13-24.7.2-31.1z"/></svg>
                        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 384 512" class="moon-icon hidden w-5 h-5 text-blue-400"><path fill="currentColor" d="M223.5 32C100 32 0 132.3 0 256S100 480 223.5 480c60.6 0 115.5-24.2 155.8-63.4c5-4.9 6.3-12.5 3.1-18.7s-10.1-9.7-17-8.5c-9.8 1.7-20 2.6-30.6 2.6c-96.8 0-175.5-78.8-175.5-176c0-65.8 36-123.1 89.3-153.3c6.1-3.5 9.2-10.5 7.7-17.3s-7.3-11.9-14.3-12.5c-6.3-.5-12.6-.8-19-.8z"/></svg>
                    </button>
                    <button id="search-button" class="text-brand-dark dark:text-brand-light hover:text-gray-900 dark:hover:text-white">
                        <svg class="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"></path></svg>
                    </button>
                    <button id="cart-button" class="text-brand-dark dark:text-brand-light hover:text-gray-900 dark:hover:text-white relative">
                        <svg class="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 3h2l.4 2M7 13h10l4-8H5.4M7 13L5.4 5M7 13l-2.293 2.293c-.63.63-.184 1.707.707 1.707H17m0 0a2 2 0 100 4 2 2 0 000-4zm-8 2a2 2 0 11-4 0 2 2 0 014 0z"></path></svg>
                        <span id="cart-count" class="absolute -top-2 -right-2 bg-brand-dark text-brand-light dark:bg-brand-light dark:text-brand-dark text-xs rounded-full h-5 w-5 flex items-center justify-center">0</span>
                    </button>
                </div>
            </div>
        </div>
    </header>

    <!-- Search Overlay -->
    <div id="search-overlay" class="hidden fixed inset-0 bg-black bg-opacity-50 z-40 pt-20">
        <div class="container mx-auto px-4 sm:px-6 lg:px-8">
            <input type="text" id="search-input" placeholder="Search for products..." class="w-full p-4 text-lg rounded-md shadow-lg focus:outline-none focus:ring-2 focus:ring-brand-dark dark:focus:ring-brand-light bg-brand-light dark:bg-gray-800 dark:text-brand-light">
        </div>
    </div>


    <main>
        <!-- Hero Section -->
        <section class="hero-section h-screen flex items-center justify-center text-white pt-20">
            <div class="bg-black bg-opacity-50 p-12 rounded-lg text-center backdrop-blur-sm max-w-4xl mx-4">
                <h1 class="text-4xl sm:text-5xl md:text-7xl font-black mb-4 leading-tight">Beyond Performance. <br> Into The Future.</h1>
                <p class="text-lg md:text-xl mb-8 max-w-2xl mx-auto">Discover our new collection, engineered for the modern athlete. Uncompromised style, unparalleled comfort.</p>
                <div class="flex justify-center space-x-4">
                    <button id="shop-now-button" class="bg-white bg-opacity-20 hover:bg-brand-dark text-white font-bold py-3 px-8 rounded-lg transition duration-300 border border-white hover:border-brand-dark dark:hover:bg-brand-light dark:hover:border-brand-light dark:hover:text-brand-dark group">
                        Shop Now 
                        <svg class="inline-block w-4 h-4 ml-2 group-hover:transform group-hover:translate-x-2 transition duration-300" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M17 8l4 4m0 0l-4 4m4-4H3"></path></svg>
                    </button>
                </div>
            </div>
        </section>

        <!-- Latest Drops Section -->
        <section id="products-section" class="py-20 bg-transparent dark:bg-black dark:bg-opacity-20">
            <div class="container mx-auto px-4 sm:px-6 lg:px-8">
                <h2 class="text-4xl font-bold text-center text-brand-dark dark:text-brand-light mb-4">Our Products</h2>
                <p class="text-center text-gray-700 dark:text-gray-300 mb-12">Explore our collection of high-performance footwear.</p>
                <div id="latest-drops" class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-10">
                    <!-- Product cards will be injected here -->
                </div>
            </div>
        </section>

    </main>

    <!-- Footer -->
    <footer class="bg-brand-dark text-white dark:bg-brand-dark">
        <div class="container mx-auto py-16 px-4 sm:px-6 lg:px-8">
            <div class="grid grid-cols-2 md:grid-cols-4 lg:grid-cols-5 gap-8">
                <div class="col-span-2 md:col-span-4 lg:col-span-1">
                     <h3 class="text-xl font-bold mb-4 flex items-center">
                        <svg class="w-7 h-7 inline-block mr-2" fill="currentColor" viewBox="0 0 512 512" xmlns="http://www.w3.org/2000/svg"><path d="M512 256C512 397.4 397.4 512 256 512S0 397.4 0 256S114.6 0 256 0S512 114.6 512 256zM256 48C141.1 48 48 141.1 48 256s93.1 208 208 208s208-93.1 208-208S370.9 48 256 48zM156.4 146.2c-16.1 21.3-24.4 47.6-24.4 75.2c0 27.6 8.3 53.9 24.4 75.2L112.9 335c-4.1 5.5-2.7 13.5 2.8 17.6s13.5 2.7 17.6-2.8l45.7-61.1c11.2 5.1 23.3 8.3 36.1 9.4V400c0 8.8 7.2 16 16 16s16-7.2 16-16V300.2c12.3-1.4 24.1-4.7 35.2-10l45.4 60.5c4.1 5.5 12.1 6.9 17.6 2.8s6.9-12.1 2.8-17.6l-43.5-57.9c16.1-21.3 24.4-47.6 24.4-75.2c0-27.6-8.3-53.9-24.4-75.2l43.5-57.9c4.1-5.5 2.7-13.5-2.8-17.6s-13.5-2.7-17.6 2.8L339.6 122c-11.2-5.1-23.3-8.3-36.1-9.4V48c0-8.8-7.2-16-16-16s-16 7.2-16 16v66.8c-12.3 1.4-24.1 4.7-35.2 10L172.9 69.3c-4.1-5.5-12.1-6.9-17.6-2.8s-6.9 12.1-2.8 17.6l43.8 58.1z"/></svg>
                        Matir Kotha
                    </h3>
                    <p class="text-gray-300">Elevate your every step.</p>
                </div>
                <div>
                    <h4 class="font-semibold text-lg mb-4">PRODUCTS</h4>
                    <ul class="space-y-2">
                        <li><a href="#" class="text-gray-300 hover:text-white">Running</a></li>
                        <li><a href="#" class="text-gray-300 hover:text-white">Lifestyle</a></li>
                        <li><a href="#" class="text-gray-300 hover:text-white">Trail</a></li>
                        <li><a href="#" class="text-gray-300 hover:text-white">Classics</a></li>
                    </ul>
                </div>
                <div>
                    <h4 class="font-semibold text-lg mb-4">SUPPORT</h4>
                    <ul class="space-y-2">
                        <li><a href="#" class="text-gray-300 hover:text-white">Contact Us</a></li>
                        <li><a href="#" class="text-gray-300 hover:text-white">Shipping</a></li>
                        <li><a href="#" class="text-gray-300 hover:text-white">Returns</a></li>
                        <li><a href="#" class="text-gray-300 hover:text-white">FAQ</a></li>
                    </ul>
                </div>
                <div>
                    <h4 class="font-semibold text-lg mb-4">COMPANY</h4>
                    <ul class="space-y-2">
                        <li><a href="#" class="text-gray-300 hover:text-white">About Us</a></li>
                        <li><a href="#" class="text-gray-300 hover:text-white">Careers</a></li>
                        <li><a href="#" class="text-gray-300 hover:text-white">Press</a></li>
                    </ul>
                </div>
                 <div class="col-span-2 md:col-span-1">
                    <h4 class="font-semibold text-lg mb-4">FOLLOW US</h4>
                    <div class="flex space-x-4">
                        <a href="#" class="text-gray-300 hover:text-white">
                            <svg class="w-5 h-5" fill="currentColor" viewBox="0 0 512 512" xmlns="http://www.w3.org/2000/svg"><path d="M512 256C512 114.6 397.4 0 256 0S0 114.6 0 256c0 123.8 86.3 226.4 200 249.2V320h-64v-64h64v-48c0-64 38.2-99.3 96.4-99.3 27.3 0 55.6 4.8 55.6 4.8v56h-28.9c-31.5 0-40.1 18.7-40.1 39.2v42.1h63.2l-10.1 64h-53.1v185.2C425.7 482.4 512 379.8 512 256z"/></svg>
                        </a>
                        <a href="#" class="text-gray-300 hover:text-white">
                            <svg class="w-5 h-5" fill="currentColor" viewBox="0 0 512 512" xmlns="http://www.w3.org/2000/svg"><path d="M389.2 48h70.6L305.6 224.2 487 464H345L233.7 318.6 106.5 464H35.8L200.7 275.5 26.8 48H172.4L272.9 180.9 389.2 48zM364.4 421.8h39.1L151.1 88h-42L364.4 421.8z"/></svg>
                        </a>
                        <a href="#" class="text-gray-300 hover:text-white">
                             <svg class="w-5 h-5" fill="currentColor" viewBox="0 0 448 512" xmlns="http://www.w3.org/2000/svg"><path d="M224.1 141c-63.6 0-114.9 51.3-114.9 114.9s51.3 114.9 114.9 114.9S339 319.5 339 255.9 287.7 141 224.1 141zm0 189.6c-41.1 0-74.7-33.5-74.7-74.7s33.5-74.7 74.7-74.7 74.7 33.5 74.7 74.7-33.6 74.7-74.7 74.7zm146.4-194.3c0 14.9-12 26.8-26.8 26.8-14.9 0-26.8-12-26.8-26.8s12-26.8 26.8-26.8 26.8 12 26.8 26.8zm76.1 27.2c-1.7-35.9-9.9-67.7-36.2-93.9-26.2-26.2-58-34.4-93.9-36.2-37-2.1-147.9-2.1-184.9 0-35.8 1.7-67.6 9.9-93.9 36.1s-34.4 58-36.2 93.9c-2.1 37-2.1 147.9 0 184.9 1.7 35.9 9.9 67.7 36.2 93.9s58 34.4 93.9 36.2c37 2.1 147.9 2.1 184.9 0 35.9-1.7 67.7-9.9 93.9-36.2 26.2-26.2 34.4-58 36.2-93.9 2.1-37 2.1-147.8 0-184.8zM398.8 388c-7.8 19.6-22.9 34.7-42.6 42.6-29.5 11.7-99.5 9-132.1 9s-102.7 2.6-132.1-9c-19.6-7.8-34.7-22.9-42.6-42.6-11.7-29.5-9-99.5-9-132.1s-2.6-102.7 9-132.1c7.8-19.6 22.9-34.7 42.6-42.6 29.5-11.7 99.5-9 132.1-9s102.7-2.6 132.1 9c19.6 7.8 34.7 22.9 42.6 42.6 11.7 29.5 9 99.5 9 132.1s2.7 102.7-9 132.1z"/></svg>
                        </a>
                        <a href="#" class="text-gray-300 hover:text-white">
                            <svg class="w-5 h-5" fill="currentColor" viewBox="0 0 576 512" xmlns="http://www.w3.org/2000/svg"><path d="M549.655 124.083c-6.281-23.65-24.787-42.276-48.284-48.597C458.781 64 288 64 288 64S117.22 64 74.629 75.486c-23.497 6.322-42.003 24.947-48.284 48.597-11.412 42.867-11.412 132.305-11.412 132.305s0 89.438 11.412 132.305c6.281 23.65 24.787 41.5 48.284 47.821C117.22 448 288 448 288 448s170.78 0 213.371-11.486c23.497-6.321 42.003-24.171 48.284-47.821 11.412-42.867 11.412-132.305 11.412-132.305s0-89.438-11.412-132.305zm-317.51 213.508V175.185l142.739 81.205-142.739 81.203z"/></svg>
                        </a>
                    </div>
                </div>
            </div>
            <div class="mt-12 border-t border-gray-600 pt-8 text-center text-gray-400">
                <p>&copy; 2025 Matir Kotha. All Rights Reserved.</p>
            </div>
        </div>
    </footer>


    <!-- Cart Modal -->
    <div id="cart-modal" class="hidden fixed inset-0 bg-black bg-opacity-50 z-50 flex justify-end">
        <div class="bg-brand-light dark:bg-[#4E342E] w-full md:w-1/2 lg:w-1/3 h-full shadow-lg flex flex-col">
            <div class="flex justify-between items-center p-6 border-b border-gray-200 dark:border-gray-700">
                <h2 class="text-2xl font-bold text-brand-dark dark:text-brand-light">Your Cart</h2>
                <button id="close-cart-button" class="text-brand-dark dark:text-brand-light text-2xl font-bold">&times;</button>
            </div>
            <div id="cart-items" class="flex-grow p-6 overflow-y-auto">
                <!-- Cart items will be injected here -->
                <p class="text-gray-500 dark:text-gray-400">Your cart is empty.</p>
            </div>
            <div class="p-6 border-t border-gray-200 dark:border-gray-700">
                <div class="flex justify-between items-center mb-4">
                    <span class="text-xl font-medium text-brand-dark dark:text-brand-light">Subtotal</span>
                    <span id="cart-subtotal" class="text-2xl font-bold text-brand-dark dark:text-brand-light">$0.00</span>
                </div>
                <button class="w-full bg-brand-dark hover:bg-opacity-90 text-white dark:bg-brand-accent dark:text-white dark:hover:bg-opacity-90 font-bold py-3 rounded-lg transition duration-300">
                    Proceed to Checkout
                </button>
            </div>
        </div>
    </div>


    <script>
        const products = [
             {
                id: 1,
                name: 'Gents T-Shirt',
                description: 'Premium cotton t-shirt with a clean silhouette, superior comfort, timeless versatility.',
                price: 130.00,
                images: [
                    'images/t-shirt-1.jpeg',
                    'images/t-shirt-2.jpeg',
                    'images/t-shirt-3.jpeg'
                ]
            },
            {
                id: 2,
                name: 'Velocity-Edge Runner',
                description: 'Engineered for speed, this shoe offers maximum energy return and a propulsive feel.',
                price: 155.00,
                images: [
                    'images/velocity-edge-runner/1.jpg',
                    'images/velocity-edge-runner/2.jpg',
                    'images/velocity-edge-runner/3.jpg'
                ]
            },
            {
                id: 3,
                name: 'Zenith-Stride Lo',
                description: 'A minimalist sneaker that combines everyday comfort with a sleek, modern aesthetic.',
                price: 110.00,
                images: [
                    'images/zenith-stride-lo/1.jpg',
                    'images/zenith-stride-lo/2.jpg',
                    'images/zenith-stride-lo/3.jpg'
                ]
            },
             {
                id: 4,
                name: 'Apex-Trail XT',
                description: 'Conquer any terrain with this rugged trail shoe, featuring superior grip and stability.',
                price: 140.00,
                images: [
                    'images/apex-trail-xt/1.jpg',
                    'images/apex-trail-xt/2.jpg',
                    'images/apex-trail-xt/3.jpg'
                ]
            },
            {
                id: 5,
                name: 'React-Charge Pro',
                description: 'Dominate the court with explosive responsiveness and a locked-in, supportive fit.',
                price: 180.00,
                images: [
                    'images/react-charge-pro/1.jpg',
                    'images/react-charge-pro/2.jpg',
                    'images/react-charge-pro/3.jpg'
                ]
            },
            {
                id: 6,
                name: 'Heritage-Court Classic',
                description: 'A timeless silhouette, crafted from premium materials for a sophisticated look and feel.',
                price: 125.00,
                images: [
                    'images/heritage-court-classic/1.jpg',
                    'images/heritage-court-classic/2.jpg',
                    'images/heritage-court-classic/3.jpg'
                ]
            }
        ];

        let cart = [];
        const latestDropsContainer = document.getElementById('latest-drops');

        function createProductCard(product) {
            return `
                <div class="product-card bg-white/50 dark:bg-gray-800/50 rounded-lg shadow-md overflow-hidden group backdrop-blur-sm">
                    <div class="relative overflow-hidden">
                        <div class="flex transition-transform duration-300 ease-in-out" id="carousel-${product.id}">
                            ${product.images.map(image => `
                                <img src="${image}" alt="${product.name}" class="w-full h-80 object-cover flex-shrink-0">
                            `).join('')}
                        </div>
                        <div class="carousel-buttons absolute inset-0 flex items-center justify-between px-4">
                            <button onclick="prevImage(${product.id})" class="carousel-button text-gray-800 hover:text-black">
                                <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 19l-7-7 7-7"></path></svg>
                            </button>
                            <button onclick="nextImage(${product.id})" class="carousel-button text-gray-800 hover:text-black">
                                <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5l7 7-7 7"></path></svg>
                            </button>
                        </div>
                    </div>
                    <div class="p-6 relative">
                        <h3 class="text-xl font-bold text-brand-dark dark:text-brand-light mb-2">${product.name}</h3>
                        <p class="text-gray-500 dark:text-gray-400 mb-8 h-12">${product.description}</p>
                        <div class="flex items-center justify-between">
                            <span class="text-2xl font-bold text-brand-dark dark:text-brand-light">$${product.price.toFixed(2)}</span>
                            <div class="add-to-cart-button-container">
                                 <button onclick="addToCart(${product.id})" class="bg-brand-dark text-white py-2 px-5 rounded-lg font-semibold hover:bg-opacity-90 dark:bg-brand-accent dark:text-white dark:hover:bg-opacity-90 transition-colors duration-300 flex items-center">
                                    <svg class="w-5 h-5 mr-2" fill="currentColor" viewBox="0 0 576 512" xmlns="http://www.w3.org/2000/svg"><path d="M0 24C0 10.7 10.7 0 24 0H69.5c22 0 41.5 12.8 50.6 32h411c26.3 0 45.5 25 38.6 50.4l-41 152.3c-8.5 31.4-37 53.3-69.5 53.3H170.7l5.4 28.5c2.2 11.3 12.1 19.5 23.6 19.5H488c13.3 0 24 10.7 24 24s-10.7 24-24 24H199.7c-34.6 0-64.3-24.6-70.7-58.5L77.4 54.5c-.7-3.8-4-6.5-7.9-6.5H24C10.7 48 0 37.3 0 24zM128 464a48 48 0 1 1 96 0 48 48 0 1 1 -96 0zm336-48a48 48 0 1 1 0 96 48 48 0 1 1 0-96z"/></svg>
                                    Add to Cart
                                </button>
                            </div>
                        </div>
                    </div>
                </div>
            `;
        }
        
        function renderProducts(filter = '') {
            const filteredProducts = products.filter(p => p.name.toLowerCase().includes(filter.toLowerCase()));
            latestDropsContainer.innerHTML = '';
            
            if (filteredProducts.length === 0) {
                latestDropsContainer.innerHTML = '<p class="text-center text-gray-500 dark:text-gray-400 col-span-3">No products found matching your search.</p>';
                return;
            }

            filteredProducts.forEach(product => latestDropsContainer.innerHTML += createProductCard(product));
        }


        // Cart functions
        const cartModal = document.getElementById('cart-modal');
        const cartButton = document.getElementById('cart-button');
        const closeCartButton = document.getElementById('close-cart-button');
        const cartItemsContainer = document.getElementById('cart-items');
        const cartCount = document.getElementById('cart-count');
        const cartSubtotal = document.getElementById('cart-subtotal');

        function saveCart() {
            localStorage.setItem('matirKothaCart', JSON.stringify(cart));
        }

        function loadCart() {
            const storedCart = localStorage.getItem('matirKothaCart');
            if (storedCart) {
                cart = JSON.parse(storedCart);
            }
        }
        
        function toggleCart() {
            cartModal.classList.toggle('hidden');
        }

        cartButton.addEventListener('click', toggleCart);
        closeCartButton.addEventListener('click', toggleCart);
        
        function addToCart(productId) {
            const product = products.find(p => p.id === productId);
            const existingItem = cart.find(item => item.id === productId);

            if (existingItem) {
                existingItem.quantity++;
            } else {
                cart.push({ ...product, quantity: 1 });
            }
            saveCart();
            renderCart();
        }

        function updateQuantity(productId, newQuantity) {
            const item = cart.find(item => item.id === productId);
            if (item) {
                if (newQuantity > 0) {
                    item.quantity = newQuantity;
                } else {
                    cart = cart.filter(cartItem => cartItem.id !== productId);
                }
            }
            saveCart();
            renderCart();
        }
        
        function renderCart() {
            if (cart.length === 0) {
                cartItemsContainer.innerHTML = '<p class="text-gray-500 dark:text-gray-400">Your cart is empty.</p>';
            } else {
                cartItemsContainer.innerHTML = cart.map(item => `
                    <div class="flex items-center justify-between mb-4 border-b pb-4 border-gray-200 dark:border-gray-700">
                        <img src="${item.images[0]}" alt="${item.name}" class="w-20 h-20 object-cover rounded-md">
                        <div class="flex-grow mx-4">
                            <p class="font-bold text-brand-dark dark:text-brand-light">${item.name}</p>
                            <p class="text-gray-600 dark:text-gray-400">$${item.price.toFixed(2)}</p>
                        </div>
                        <div class="flex items-center">
                            <div class="cart-item-quantity flex items-center border rounded border-gray-300 dark:border-gray-600">
                                <button onclick="updateQuantity(${item.id}, ${item.quantity - 1})" class="text-brand-dark dark:text-brand-light hover:bg-gray-100 dark:hover:bg-gray-700">-</button>
                                <span class="px-3 text-brand-dark dark:text-brand-light">${item.quantity}</span>
                                <button onclick="updateQuantity(${item.id}, ${item.quantity + 1})" class="text-brand-dark dark:text-brand-light hover:bg-gray-100 dark:hover:bg-gray-700">+</button>
                            </div>
                        </div>
                    </div>
                `).join('');
            }
            
            const totalItems = cart.reduce((sum, item) => sum + item.quantity, 0);
            const subtotal = cart.reduce((sum, item) => sum + item.price * item.quantity, 0);
            
            cartCount.textContent = totalItems;
            cartSubtotal.textContent = `$${subtotal.toFixed(2)}`;
        }

        // Search functions
        const searchButton = document.getElementById('search-button');
        const searchOverlay = document.getElementById('search-overlay');
        const searchInput = document.getElementById('search-input');

        searchButton.addEventListener('click', () => {
            searchOverlay.classList.toggle('hidden');
            if (!searchOverlay.classList.contains('hidden')) {
                searchInput.focus();
            }
        });
        
        searchInput.addEventListener('input', (e) => {
            renderProducts(e.target.value);
        });


        // Theme toggle
        const themeToggleButton = document.getElementById('theme-toggle-button');
        const sunIcon = document.querySelector('.sun-icon');
        const moonIcon = document.querySelector('.moon-icon');
        const htmlEl = document.documentElement;

        function updateThemeIcons() {
            if (htmlEl.classList.contains('dark')) {
                sunIcon.classList.add('hidden');
                moonIcon.classList.remove('hidden');
            } else {
                sunIcon.classList.remove('hidden');
                moonIcon.classList.add('hidden');
            }
        }

        if (localStorage.getItem('theme') === 'dark' || (!('theme' in localStorage) && window.matchMedia('(prefers-color-scheme: dark)').matches)) {
          htmlEl.classList.add('dark');
        } else {
          htmlEl.classList.remove('dark');
        }
        updateThemeIcons();

        themeToggleButton.addEventListener('click', () => {
            htmlEl.classList.toggle('dark');
            if (htmlEl.classList.contains('dark')) {
                localStorage.setItem('theme', 'dark');
            } else {
                localStorage.setItem('theme', 'light');
            }
            updateThemeIcons();
        });
        
        // Shop Now Scroll
        const shopNowButton = document.getElementById('shop-now-button');
        const productsSection = document.getElementById('products-section');
        
        shopNowButton.addEventListener('click', () => {
            productsSection.scrollIntoView();
        });

        // Service Worker Registration
        if ('serviceWorker' in navigator) {
            window.addEventListener('load', () => {
                navigator.serviceWorker.register('/sw.js')
                    .then(registration => {
                        console.log('ServiceWorker registration successful with scope: ', registration.scope);
                    })
                    .catch(error => {
                        console.log('ServiceWorker registration failed: ', error);
                    });
            });
        }


        // Initial Render
        let currentImageIndices = {};
        products.forEach(p => currentImageIndices[p.id] = 0);

        function updateCarousel(productId) {
            const carousel = document.getElementById(`carousel-${productId}`);
            if (carousel) {
                const offset = -currentImageIndices[productId] * 100;
                carousel.style.transform = `translateX(${offset}%)`;
            }
        }

        function nextImage(productId) {
            const product = products.find(p => p.id === productId);
            currentImageIndices[productId] = (currentImageIndices[productId] + 1) % product.images.length;
            updateCarousel(productId);
        }

        function prevImage(productId) {
            const product = products.find(p => p.id === productId);
            currentImageIndices[productId] = (currentImageIndices[productId] - 1 + product.images.length) % product.images.length;
            updateCarousel(productId);
        }

        loadCart();
        renderProducts();
        renderCart();

    </script>
</body>
</html>

